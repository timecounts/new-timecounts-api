

FacebookGraphAPIError: (#12) cannot_access_user_username_field is deprecated for versions v2.0 and higherusername field is deprecated for versions v2.0 and higher
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/passport-facebook/lib/strategy.js:167:21
    at passBackControl (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/oauth/lib/oauth2.js:132:9)
    at IncomingMessage.<anonymous> (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/oauth/lib/oauth2.js:157:7)
    at IncomingMessage.emit (node:events:402:35)
    at endReadableNT (node:internal/streams/readable:1343:12)
    at processTicksAndRejections (node:internal/process/task_queues:83:21)

MongoServerError: E11000 duplicate key error collection: database_1.users index: facebookId_1 dup key: { facebookId: null }
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

MongoServerError: E11000 duplicate key error collection: database_1.users index: facebookId_1 dup key: { facebookId: null }
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

MongoServerError: E11000 duplicate key error collection: database_1.users index: facebookId_1 dup key: { facebookId: null }
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

MongoServerError: E11000 duplicate key error collection: database_1.users index: facebookId_1 dup key: { facebookId: null }
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/run/media/bishal9/Repos/Varlyq Technologies/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

MongoServerError: E11000 duplicate key error collection: database_1.users index: facebookId_1 dup key: { facebookId: null }
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\mongodb\lib\operations\insert.js:51:33
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\mongodb\lib\cmap\connection_pool.js:272:25
    at handleOperationResult (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\mongodb\lib\sdam\server.js:363:9)
    at MessageStream.messageHandler (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\mongodb\lib\cmap\connection.js:479:9)
    at MessageStream.emit (events.js:400:28)
    at processIncomingData (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\mongodb\lib\cmap\message_stream.js:108:16)
    at MessageStream._write (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\mongodb\lib\cmap\message_stream.js:28:9)
    at writeOrBuffer (internal/streams/writable.js:358:12)
    at MessageStream.Writable.write (internal/streams/writable.js:303:10)
    at TLSSocket.ondata (internal/streams/readable.js:726:22)

TypeError: Cannot read property 'destroy' of undefined
    at exports.logout (C:\Users\Bishal 9\Documents\Timecounts\server\versions\v1\api\auth\auth.controller.js:47:21)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:137:13)
    at Route.dispatch (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:112:3)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:281:22
    at Function.process_params (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:335:12)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:275:10)
    at Function.handle (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:174:3)
    at router (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:47:12)

TypeError: Cannot read property 'destroy' of undefined
    at exports.logout (C:\Users\Bishal 9\Documents\Timecounts\server\versions\v1\api\auth\auth.controller.js:47:21)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:137:13)
    at Route.dispatch (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:112:3)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:281:22
    at Function.process_params (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:335:12)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:275:10)
    at Function.handle (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:174:3)
    at router (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:47:12)

TypeError: Cannot read property 'email' of undefined
    at exports.facebookLogin (C:\Users\Bishal 9\Documents\Timecounts\server\versions\v1\api\auth\auth.controller.js:87:68)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:137:13)
    at Route.dispatch (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:112:3)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:281:22
    at Function.process_params (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:335:12)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:275:10)
    at Function.handle (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:174:3)
    at router (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:47:12)

TypeError: Cannot read property 'email' of undefined
    at exports.googleLogin (C:\Users\Bishal 9\Documents\Timecounts\server\versions\v1\api\auth\auth.controller.js:107:68)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:137:13)
    at Route.dispatch (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:112:3)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:281:22
    at Function.process_params (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:335:12)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:275:10)
    at Function.handle (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:174:3)
    at router (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:47:12)

TypeError: Cannot read property 'name' of undefined
    at exports.facebookSignup (C:\Users\Bishal 9\Documents\Timecounts\server\versions\v1\api\auth\auth.controller.js:130:41)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:137:13)
    at Route.dispatch (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\route.js:112:3)
    at Layer.handle [as handle_request] (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:281:22
    at Function.process_params (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:335:12)
    at next (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:275:10)
    at Function.handle (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:174:3)
    at router (C:\Users\Bishal 9\Documents\Timecounts\server\node_modules\express\lib\router\index.js:47:12)

MongoServerError: E11000 duplicate key error collection: database_1.users index: pictureUrl_1 dup key: { pictureUrl: null }
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

MongoServerError: E11000 duplicate key error collection: database_1.users index: pictureUrl_1 dup key: { pictureUrl: null }
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

TypeError: Cannot read properties of null (reading 'email')
    at exports.createUser (/home/deepanshu/Documents/Timecounts/server/versions/v1/api/user/user.controller.js:24:77)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)

MongoServerError: E11000 duplicate key error collection: database_1.users index: pictureUrl_1 dup key: { pictureUrl: null }
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

MongoServerError: E11000 duplicate key error collection: database_1.users index: pictureUrl_1 dup key: { pictureUrl: null }
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/operations/insert.js:51:33
    at /home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection_pool.js:272:25
    at handleOperationResult (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/sdam/server.js:363:9)
    at MessageStream.messageHandler (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/connection.js:479:9)
    at MessageStream.emit (node:events:390:28)
    at processIncomingData (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:108:16)
    at MessageStream._write (/home/deepanshu/Documents/Timecounts/server/node_modules/mongodb/lib/cmap/message_stream.js:28:9)
    at writeOrBuffer (node:internal/streams/writable:389:12)
    at _write (node:internal/streams/writable:330:10)
    at MessageStream.Writable.write (node:internal/streams/writable:334:10)

TypeError: Cannot read properties of undefined (reading 'validate')
    at validate (/home/deepanshu/Documents/Timecounts/server/versions/v1/helpers/validation/validate.js:4:50)
    at exports.resendEmail (/home/deepanshu/Documents/Timecounts/server/versions/v1/api/auth/auth.controller.js:260:28)
    at Layer.handle [as handle_request] (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/route.js:137:13)
    at Route.dispatch (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/route.js:112:3)
    at Layer.handle [as handle_request] (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/layer.js:95:5)
    at /home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/index.js:281:22
    at Function.process_params (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/index.js:335:12)
    at next (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/index.js:275:10)
    at Function.handle (/home/deepanshu/Documents/Timecounts/server/node_modules/express/lib/router/index.js:174:3)

TypeError: verifyEmail is not a function
    at exports.createUser (/home/deepanshu/Documents/Timecounts/server/versions/v1/api/user/user.controller.js:24:28)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)

ReferenceError: TokenHandler is not defined
    at exports.createUser (/home/deepanshu/Documents/Timecounts/server/versions/v1/api/user/user.controller.js:24:23)
    at processTicksAndRejections (node:internal/process/task_queues:96:5)